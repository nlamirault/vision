elasticsearch:
  #image: vision/elasticsearch
  build: elasticsearch
  ports:
    - "9200:9200"
    - "9300:9300"
  volumes:
    - data/elasticsearch/lib:/var/lib/elasticsearch
    - data/elasticsearch/log:/var/log/supervisor
  hostname: elasticsearch

influxdb:
  #image: vision/influxdb
  build: influxdb
  ports:
    - "8083:8083"
    - "8086:8086"
    - "8090:8090"
    - "8099:8099"
  volumes:
    - data/influxdb/lib:/var/lib/influxdb
    - data/influxdb/log:/var/log/supervisor

grafana:
  #image: vision/grafana
  build: grafana
  ports:
    - "9090:80"
  volumes:
    - data/grafana/log:/var/log/supervisor
  links:
    - elasticsearch:elasticsearch
    - influxdb:influxdb

kibana:
  #image: vision/kibana
  build: kibana
  ports:
    - "5601:5601"
  volumes:
    - data/kibana/log:/var/log/supervisor
  links:
    - elasticsearch:elasticsearch

fluentd:
  #image: vision/fluentd
  build: fluentd
  ports:
    - "24224:24224"
    - "9292:9292"
  volumes:
    - data/fluentd/log:/var/log/supervisor
  links:
    - elasticsearch:elasticsearch

cadvisor:
  image: google/cadvisor
  volumes:
   - /:/rootfs:ro
   - /var/run:/var/run:rw
   - /sys:/sys:ro
   - /var/lib/docker/:/var/lib/docker:ro
  ports:
   - "8080:8080"